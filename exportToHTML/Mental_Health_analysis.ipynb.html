<html>
<head>
<title>Mental_Health_analysis.ipynb</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #cf8e6d;}
.s2 { color: #bcbec4;}
.s3 { color: #6aab73;}
.s4 { color: #2aacb8;}
.s5 { color: #7a7e85;}
.ls0 { height: 1px; border-width: 0; color: #43454a; background-color:#43454a}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
Mental_Health_analysis.ipynb</font>
</center></td></tr></table>
<pre><span class="s0">#%% md 
# Analiza zdrowia psychicznego użytkowników social mediów <hr class="ls0">#%% md 
dane są z strony : https://www.kaggle.com/datasets/ayeshaimran123/social-media-and-mental-health-balance <hr class="ls0">#%% md 
## Przygotowanie Danych <hr class="ls0">#%% md 
#### Wczytanie bibliotek <hr class="ls0">#%% 
</span><span class="s1">import </span><span class="s0">pandas </span><span class="s1">as </span><span class="s0">pd</span>
<span class="s1">import </span><span class="s0">numpy </span><span class="s1">as </span><span class="s0">np</span>
<span class="s1">import </span><span class="s0">matplotlib</span><span class="s2">.</span><span class="s0">pyplot </span><span class="s1">as </span><span class="s0">plt</span>
<span class="s1">import </span><span class="s0">seaborn </span><span class="s1">as </span><span class="s0">sns</span>
<span class="s0">sns</span><span class="s2">.</span><span class="s0">set_style</span><span class="s2">(</span><span class="s3">&quot;darkgrid&quot;</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">rcParams</span><span class="s2">[</span><span class="s3">&quot;figure.autolayout&quot;</span><span class="s2">] = </span><span class="s1">True</span>
<span class="s1">from </span><span class="s0">pandas</span><span class="s2">.</span><span class="s0">plotting </span><span class="s1">import </span><span class="s0">scatter_matrix</span>
<span class="s1">from </span><span class="s0">sklearn</span><span class="s2">.</span><span class="s0">decomposition </span><span class="s1">import </span><span class="s0">PCA</span>
<span class="s1">from </span><span class="s0">sklearn</span><span class="s2">.</span><span class="s0">preprocessing </span><span class="s1">import </span><span class="s0">StandardScaler</span>
<span class="s1">from </span><span class="s0">scipy </span><span class="s1">import </span><span class="s0">stats</span>
<span class="s1">import </span><span class="s0">warnings</span>
<span class="s0">warnings</span><span class="s2">.</span><span class="s0">filterwarnings</span><span class="s2">(</span><span class="s3">&quot;ignore&quot;</span><span class="s2">, </span><span class="s0">category</span><span class="s2">=</span><span class="s0">DeprecationWarning</span><span class="s2">)</span><hr class="ls0"><span class="s0">#%% md 
#### Wczytanie danych <hr class="ls0">#%% 
df </span><span class="s2">= </span><span class="s0">pd</span><span class="s2">.</span><span class="s0">read_csv</span><span class="s2">(</span><span class="s3">'data/Mental_Health_and_Social_Media_Balance_Dataset.csv'</span><span class="s2">)</span>
<span class="s0">df</span><span class="s2">.</span><span class="s0">info</span><span class="s2">()</span><hr class="ls0"><span class="s0">#%% md 
Baza danych zawiera 10 kolumn, z czego jedna ('User_ID') jest dla nas zbędna. 
Baza zawiera 500 recordów, nie posiada braków, a wszytskie wartość mają odpowiednie typy danych. <hr class="ls0">#%% 
</span><span class="s1">if </span><span class="s3">'User_ID' </span><span class="s1">in </span><span class="s0">df</span><span class="s2">.</span><span class="s0">columns</span><span class="s2">:</span>
    <span class="s0">df </span><span class="s2">= </span><span class="s0">df</span><span class="s2">.</span><span class="s0">drop</span><span class="s2">(</span><span class="s3">'User_ID'</span><span class="s2">, </span><span class="s0">axis</span><span class="s2">=</span><span class="s4">1</span><span class="s2">)</span>

<span class="s0">df</span><span class="s2">.</span><span class="s0">columns </span><span class="s2">= [</span><span class="s3">'Wiek'</span><span class="s2">, </span><span class="s3">'Płeć'</span><span class="s2">, </span><span class="s3">'Czas_przed_ekranem_dziennie'</span><span class="s2">, </span><span class="s3">'Jakość_snu'</span><span class="s2">, </span><span class="s3">'Poziom_stresu'</span><span class="s2">, </span><span class="s3">'Dni_bez_social_mediów'</span><span class="s2">, </span><span class="s3">'Ćwiczenia_tygodniowo'</span><span class="s2">, </span><span class="s3">'Platformy_social_mediów'</span><span class="s2">, </span><span class="s3">'Poziom_szczęścia'</span><span class="s2">]</span>
<span class="s0">df</span><span class="s2">[</span><span class="s3">'Płeć'</span><span class="s2">] = </span><span class="s0">df</span><span class="s2">[</span><span class="s3">'Płeć'</span><span class="s2">].</span><span class="s0">replace</span><span class="s2">({</span><span class="s3">'Male'</span><span class="s2">: </span><span class="s3">'Mężczyzna'</span><span class="s2">, </span><span class="s3">'Female'</span><span class="s2">: </span><span class="s3">'Kobieta'</span><span class="s2">, </span><span class="s3">'Other'</span><span class="s2">: </span><span class="s3">'inne'</span><span class="s2">})</span>

<span class="s0">kolNumeryczne </span><span class="s2">= </span><span class="s0">df</span><span class="s2">.</span><span class="s0">select_dtypes</span><span class="s2">(</span><span class="s0">include</span><span class="s2">=[</span><span class="s3">'float'</span><span class="s2">,</span><span class="s3">'int'</span><span class="s2">]).</span><span class="s0">columns</span>
<span class="s0">kolNieNumeryczne </span><span class="s2">= </span><span class="s0">df</span><span class="s2">.</span><span class="s0">select_dtypes</span><span class="s2">(</span><span class="s0">include</span><span class="s2">=[</span><span class="s3">'object'</span><span class="s2">]).</span><span class="s0">columns</span>

<span class="s0">df</span><span class="s2">.</span><span class="s0">head</span><span class="s2">()</span><hr class="ls0"><span class="s0">#%% md 
#### walidacja bazy danych <hr class="ls0">#%% 
duplikaty </span><span class="s2">= </span><span class="s0">df</span><span class="s2">.</span><span class="s0">duplicated</span><span class="s2">()</span>
<span class="s0">duplikaty</span><span class="s2">[</span><span class="s0">duplikaty </span><span class="s2">== </span><span class="s1">True</span><span class="s2">].</span><span class="s0">sum</span><span class="s2">()</span><hr class="ls0"><span class="s0">#%% 
df</span><span class="s2">.</span><span class="s0">isna</span><span class="s2">().</span><span class="s0">sum</span><span class="s2">().</span><span class="s0">sum</span><span class="s2">()</span><hr class="ls0"><span class="s0">#%% md 
Baza danych nie posiada duplikatów oraz jest wolna od NaN <hr class="ls0">#%% md 
## Podstawowa analiza <hr class="ls0">#%% md 
#### analiza danych numerycznych <hr class="ls0">#%% 
df</span><span class="s2">[</span><span class="s0">kolNumeryczne</span><span class="s2">].</span><span class="s0">describe</span><span class="s2">()</span><hr class="ls0"><span class="s0">#%% md 
#### analiza danych nienumerycznych <hr class="ls0">#%% 
</span><span class="s1">for </span><span class="s0">kol </span><span class="s1">in </span><span class="s0">kolNieNumeryczne</span><span class="s2">:</span>
    <span class="s0">print</span><span class="s2">(</span><span class="s0">df</span><span class="s2">[</span><span class="s0">kol</span><span class="s2">].</span><span class="s0">value_counts</span><span class="s2">(), </span><span class="s0">end</span><span class="s2">=</span><span class="s3">'</span><span class="s1">\n\n\n</span><span class="s3">'</span><span class="s2">)</span><hr class="ls0"><span class="s0">#%% md 
Ilość kobiet jest zbliżona do ilości mężczyzn oraz ilość użytkowników poszczególnych platform jest do siebie zbliżona, mamy zatem doczynienia z dobrze zbalansowaną bazą danych. <hr class="ls0">#%% md 
## Wizualizacja pojedyńczych statystyk <hr class="ls0">#%% md 
#### Wiek <hr class="ls0">#%% 
plt</span><span class="s2">.</span><span class="s0">figure</span><span class="s2">(</span><span class="s0">figsize</span><span class="s2">=(</span><span class="s4">8</span><span class="s2">,</span><span class="s4">6</span><span class="s2">))</span>
<span class="s0">sns</span><span class="s2">.</span><span class="s0">histplot</span><span class="s2">(</span><span class="s0">data </span><span class="s2">= </span><span class="s0">df</span><span class="s2">, </span><span class="s0">x </span><span class="s2">= </span><span class="s3">'Wiek'</span><span class="s2">, </span><span class="s0">binwidth</span><span class="s2">=</span><span class="s4">1</span><span class="s2">, </span><span class="s0">kde</span><span class="s2">=</span><span class="s1">True</span><span class="s2">, </span><span class="s0">discrete</span><span class="s2">=</span><span class="s1">True</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">ylabel</span><span class="s2">(</span><span class="s3">'ilość osób'</span><span class="s2">, </span><span class="s0">rotation</span><span class="s2">=</span><span class="s4">0</span><span class="s2">, </span><span class="s0">labelpad</span><span class="s2">=</span><span class="s4">30</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">title</span><span class="s2">(</span><span class="s3">'Rozkład wieku'</span><span class="s2">, </span><span class="s0">fontsize</span><span class="s2">=</span><span class="s4">15</span><span class="s2">, </span><span class="s0">fontweight</span><span class="s2">=</span><span class="s3">'bold'</span><span class="s2">)</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">show</span><span class="s2">()</span>
<span class="s0">df</span><span class="s2">[</span><span class="s3">'Wiek'</span><span class="s2">].</span><span class="s0">describe</span><span class="s2">()</span><hr class="ls0"><span class="s0">#%% md 
#### Płeć <hr class="ls0">#%% 
genderC </span><span class="s2">= </span><span class="s0">df</span><span class="s2">[</span><span class="s3">'Płeć'</span><span class="s2">].</span><span class="s0">value_counts</span><span class="s2">()</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">pie</span><span class="s2">(</span>
    <span class="s0">genderC</span><span class="s2">,</span>
    <span class="s0">labels</span><span class="s2">=</span><span class="s0">genderC</span><span class="s2">.</span><span class="s0">index</span><span class="s2">,</span>
    <span class="s0">autopct</span><span class="s2">=</span><span class="s1">lambda </span><span class="s0">p</span><span class="s2">: </span><span class="s3">'{:,.0f}</span><span class="s1">\n </span><span class="s3">({:.2f}%) '</span><span class="s2">.</span><span class="s0">format</span><span class="s2">(</span><span class="s0">p </span><span class="s2">* </span><span class="s0">sum</span><span class="s2">(</span><span class="s0">genderC</span><span class="s2">)/</span><span class="s4">100</span><span class="s2">, </span><span class="s0">p</span><span class="s2">),</span>
    <span class="s0">startangle</span><span class="s2">=</span><span class="s4">90</span><span class="s2">,</span>
    <span class="s0">explode</span><span class="s2">=(</span><span class="s4">0.1</span><span class="s2">,</span><span class="s4">0.1</span><span class="s2">,</span><span class="s4">0.1</span><span class="s2">),</span>
    <span class="s0">textprops</span><span class="s2">={</span><span class="s3">'fontsize'</span><span class="s2">: </span><span class="s4">15</span><span class="s2">, </span><span class="s3">'fontweight'</span><span class="s2">: </span><span class="s3">'bold'</span><span class="s2">, </span><span class="s3">'color'</span><span class="s2">: </span><span class="s3">'black'</span><span class="s2">},</span>
    <span class="s0">shadow</span><span class="s2">=</span><span class="s1">True</span>
<span class="s2">)</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">title</span><span class="s2">(</span><span class="s3">'Rozkłd Płci'</span><span class="s2">, </span><span class="s0">fontsize</span><span class="s2">=</span><span class="s4">15</span><span class="s2">, </span><span class="s0">fontweight</span><span class="s2">=</span><span class="s3">'bold'</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">show</span><span class="s2">()</span>
<hr class="ls0"><span class="s0">#%% md 
#### Czas przed ekranem dziennie <hr class="ls0">#%% 
</span><span class="s5">#Wykres gestosci, poniewaz zmienne ciagłe, a nie dyskretne</span>
<span class="s0">w </span><span class="s2">= </span><span class="s0">sns</span><span class="s2">.</span><span class="s0">displot</span><span class="s2">(</span><span class="s0">x</span><span class="s2">=</span><span class="s3">'Czas_przed_ekranem_dziennie'</span><span class="s2">, </span><span class="s0">data</span><span class="s2">=</span><span class="s0">df</span><span class="s2">, </span><span class="s0">kind</span><span class="s2">=</span><span class="s3">'kde'</span><span class="s2">)  </span><span class="s5">#sns.displot tworzy własny faceGrid</span>
<span class="s0">w</span><span class="s2">.</span><span class="s0">set_axis_labels</span><span class="s2">(</span><span class="s3">&quot;Godziny&quot;</span><span class="s2">, </span><span class="s3">&quot;Gęstość&quot;</span><span class="s2">)</span>
<span class="s0">w</span><span class="s2">.</span><span class="s0">fig</span><span class="s2">.</span><span class="s0">subplots_adjust</span><span class="s2">(</span><span class="s0">top</span><span class="s2">=</span><span class="s4">0.92</span><span class="s2">)</span>
<span class="s0">_ </span><span class="s2">= </span><span class="s0">w</span><span class="s2">.</span><span class="s0">fig</span><span class="s2">.</span><span class="s0">suptitle</span><span class="s2">(</span><span class="s3">&quot;Dzienny czas przed ekranem&quot;</span><span class="s2">, </span><span class="s0">fontsize</span><span class="s2">=</span><span class="s4">15</span><span class="s2">, </span><span class="s0">fontweight</span><span class="s2">=</span><span class="s3">'bold'</span><span class="s2">)</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">show</span><span class="s2">()</span>
<span class="s0">df</span><span class="s2">[</span><span class="s3">'Czas_przed_ekranem_dziennie'</span><span class="s2">].</span><span class="s0">describe</span><span class="s2">()</span><hr class="ls0"><span class="s0">#%% md 
#### Jakość snu (1-10) <hr class="ls0">#%% 
plt</span><span class="s2">.</span><span class="s0">figure</span><span class="s2">(</span><span class="s0">figsize</span><span class="s2">=(</span><span class="s4">8</span><span class="s2">,</span><span class="s4">6</span><span class="s2">))</span>
<span class="s0">w </span><span class="s2">= </span><span class="s0">sns</span><span class="s2">.</span><span class="s0">histplot</span><span class="s2">(</span><span class="s0">x</span><span class="s2">=</span><span class="s3">'Jakość_snu'</span><span class="s2">, </span><span class="s0">data</span><span class="s2">=</span><span class="s0">df</span><span class="s2">, </span><span class="s0">binwidth</span><span class="s2">=</span><span class="s4">1</span><span class="s2">, </span><span class="s0">discrete</span><span class="s2">=</span><span class="s1">True</span><span class="s2">)</span>
<span class="s0">w</span><span class="s2">.</span><span class="s0">set_xlabel</span><span class="s2">(</span><span class="s3">'Jakość_snu'</span><span class="s2">)</span>
<span class="s0">w</span><span class="s2">.</span><span class="s0">set_ylabel</span><span class="s2">(</span><span class="s3">'Ilość osób'</span><span class="s2">, </span><span class="s0">rotation</span><span class="s2">=</span><span class="s4">0</span><span class="s2">, </span><span class="s0">labelpad</span><span class="s2">=</span><span class="s4">30</span><span class="s2">)</span>
<span class="s0">w</span><span class="s2">.</span><span class="s0">xaxis</span><span class="s2">.</span><span class="s0">set_major_locator</span><span class="s2">(</span><span class="s0">plt</span><span class="s2">.</span><span class="s0">MaxNLocator</span><span class="s2">(</span><span class="s0">integer</span><span class="s2">=</span><span class="s1">True</span><span class="s2">)) </span><span class="s5">#Aby liczby na osi X były całkowite</span>
<span class="s0">w</span><span class="s2">.</span><span class="s0">set_title</span><span class="s2">(</span><span class="s3">&quot;Jakość snu użytkowników&quot;</span><span class="s2">, </span><span class="s0">fontsize</span><span class="s2">=</span><span class="s4">15</span><span class="s2">, </span><span class="s0">fontweight</span><span class="s2">=</span><span class="s3">'bold'</span><span class="s2">)</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">show</span><span class="s2">()</span>
<span class="s0">df</span><span class="s2">[</span><span class="s3">'Jakość_snu'</span><span class="s2">].</span><span class="s0">describe</span><span class="s2">()</span><hr class="ls0"><span class="s0">#%% md 
#### Poziom stresu (1-10) <hr class="ls0">#%% 
plt</span><span class="s2">.</span><span class="s0">figure</span><span class="s2">(</span><span class="s0">figsize</span><span class="s2">=(</span><span class="s4">8</span><span class="s2">,</span><span class="s4">6</span><span class="s2">))</span>
<span class="s0">s </span><span class="s2">= </span><span class="s0">sns</span><span class="s2">.</span><span class="s0">histplot</span><span class="s2">(</span><span class="s0">x</span><span class="s2">=</span><span class="s3">'Poziom_stresu'</span><span class="s2">, </span><span class="s0">data</span><span class="s2">=</span><span class="s0">df</span><span class="s2">, </span><span class="s0">binwidth</span><span class="s2">=</span><span class="s4">1</span><span class="s2">, </span><span class="s0">discrete</span><span class="s2">=</span><span class="s1">True</span><span class="s2">)</span>
<span class="s0">s</span><span class="s2">.</span><span class="s0">set_xlabel</span><span class="s2">(</span><span class="s3">'Poziom stresu'</span><span class="s2">)</span>
<span class="s0">s</span><span class="s2">.</span><span class="s0">set_ylabel</span><span class="s2">(</span><span class="s3">'ilość osób'</span><span class="s2">, </span><span class="s0">rotation</span><span class="s2">=</span><span class="s4">0</span><span class="s2">, </span><span class="s0">labelpad</span><span class="s2">=</span><span class="s4">30</span><span class="s2">)</span>
<span class="s0">s</span><span class="s2">.</span><span class="s0">xaxis</span><span class="s2">.</span><span class="s0">set_major_locator</span><span class="s2">(</span><span class="s0">plt</span><span class="s2">.</span><span class="s0">MaxNLocator</span><span class="s2">(</span><span class="s0">integer</span><span class="s2">=</span><span class="s1">True</span><span class="s2">))</span>
<span class="s0">s</span><span class="s2">.</span><span class="s0">set_title</span><span class="s2">(</span><span class="s3">&quot;Deklarowany poziom stresu użytkowników&quot;</span><span class="s2">, </span><span class="s0">fontsize</span><span class="s2">=</span><span class="s4">15</span><span class="s2">, </span><span class="s0">fontweight</span><span class="s2">=</span><span class="s3">'bold'</span><span class="s2">)</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">show</span><span class="s2">()</span>
<span class="s0">df</span><span class="s2">[</span><span class="s3">'Poziom_stresu'</span><span class="s2">].</span><span class="s0">describe</span><span class="s2">()</span><hr class="ls0"><span class="s0">#%% md 
#### Dni bez social mediów <hr class="ls0">#%% 
plt</span><span class="s2">.</span><span class="s0">figure</span><span class="s2">(</span><span class="s0">figsize</span><span class="s2">=(</span><span class="s4">8</span><span class="s2">,</span><span class="s4">6</span><span class="s2">))</span>
<span class="s0">d </span><span class="s2">= </span><span class="s0">sns</span><span class="s2">.</span><span class="s0">histplot</span><span class="s2">(</span><span class="s0">x</span><span class="s2">=</span><span class="s3">'Dni_bez_social_mediów'</span><span class="s2">, </span><span class="s0">data</span><span class="s2">=</span><span class="s0">df</span><span class="s2">, </span><span class="s0">binwidth</span><span class="s2">=</span><span class="s4">1</span><span class="s2">, </span><span class="s0">discrete</span><span class="s2">=</span><span class="s1">True</span><span class="s2">)</span>
<span class="s0">d</span><span class="s2">.</span><span class="s0">set_xlabel</span><span class="s2">(</span><span class="s3">'Dni bez social media'</span><span class="s2">)</span>
<span class="s0">d</span><span class="s2">.</span><span class="s0">set_ylabel</span><span class="s2">(</span><span class="s3">'Ilość osób'</span><span class="s2">, </span><span class="s0">rotation</span><span class="s2">=</span><span class="s4">0</span><span class="s2">, </span><span class="s0">labelpad</span><span class="s2">=</span><span class="s4">30</span><span class="s2">)</span>
<span class="s0">d</span><span class="s2">.</span><span class="s0">xaxis</span><span class="s2">.</span><span class="s0">set_major_locator</span><span class="s2">(</span><span class="s0">plt</span><span class="s2">.</span><span class="s0">MaxNLocator</span><span class="s2">(</span><span class="s0">integer</span><span class="s2">=</span><span class="s1">True</span><span class="s2">))</span>
<span class="s0">d</span><span class="s2">.</span><span class="s0">set_title</span><span class="s2">(</span><span class="s3">&quot;Ilość dni bez social mediów&quot;</span><span class="s2">, </span><span class="s0">fontsize</span><span class="s2">=</span><span class="s4">15</span><span class="s2">, </span><span class="s0">fontweight</span><span class="s2">=</span><span class="s3">'bold'</span><span class="s2">)</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">show</span><span class="s2">()</span>
<span class="s0">df</span><span class="s2">[</span><span class="s3">'Dni_bez_social_mediów'</span><span class="s2">].</span><span class="s0">describe</span><span class="s2">()</span><hr class="ls0"><span class="s0">#%% md 
#### Aktywność fizyczna (tygodniowa) <hr class="ls0">#%% 
plt</span><span class="s2">.</span><span class="s0">figure</span><span class="s2">(</span><span class="s0">figsize</span><span class="s2">=(</span><span class="s4">8</span><span class="s2">,</span><span class="s4">6</span><span class="s2">))</span>
<span class="s0">c </span><span class="s2">= </span><span class="s0">sns</span><span class="s2">.</span><span class="s0">histplot</span><span class="s2">(</span><span class="s0">x</span><span class="s2">=</span><span class="s3">'Ćwiczenia_tygodniowo'</span><span class="s2">, </span><span class="s0">data</span><span class="s2">=</span><span class="s0">df</span><span class="s2">, </span><span class="s0">binwidth</span><span class="s2">=</span><span class="s4">1</span><span class="s2">, </span><span class="s0">discrete</span><span class="s2">=</span><span class="s1">True</span><span class="s2">)</span>
<span class="s0">c</span><span class="s2">.</span><span class="s0">set_xlabel</span><span class="s2">(</span><span class="s3">'Dni w tygodniu z aktywnością fizyczną'</span><span class="s2">)</span>
<span class="s0">c</span><span class="s2">.</span><span class="s0">set_ylabel</span><span class="s2">(</span><span class="s3">'Ilość osób'</span><span class="s2">, </span><span class="s0">rotation</span><span class="s2">=</span><span class="s4">0</span><span class="s2">, </span><span class="s0">labelpad</span><span class="s2">=</span><span class="s4">30</span><span class="s2">)</span>
<span class="s0">c</span><span class="s2">.</span><span class="s0">xaxis</span><span class="s2">.</span><span class="s0">set_major_locator</span><span class="s2">(</span><span class="s0">plt</span><span class="s2">.</span><span class="s0">MaxNLocator</span><span class="s2">(</span><span class="s0">integer</span><span class="s2">=</span><span class="s1">True</span><span class="s2">))</span>
<span class="s0">c</span><span class="s2">.</span><span class="s0">set_title</span><span class="s2">(</span><span class="s3">&quot;Ilość dni w których podejmowana była aktywność fizyczna&quot;</span><span class="s2">, </span><span class="s0">fontsize</span><span class="s2">=</span><span class="s4">15</span><span class="s2">, </span><span class="s0">fontweight</span><span class="s2">=</span><span class="s3">'bold'</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">tight_layout</span><span class="s2">()</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">show</span><span class="s2">()</span>
<span class="s0">df</span><span class="s2">[</span><span class="s3">'Ćwiczenia_tygodniowo'</span><span class="s2">].</span><span class="s0">describe</span><span class="s2">()</span><hr class="ls0"><span class="s0">#%% md 
#### Platforma Social Mediów <hr class="ls0">#%% 
platformC </span><span class="s2">= </span><span class="s0">df</span><span class="s2">[</span><span class="s3">'Platformy_social_mediów'</span><span class="s2">].</span><span class="s0">value_counts</span><span class="s2">()</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">figure</span><span class="s2">(</span><span class="s0">figsize</span><span class="s2">=(</span><span class="s4">8</span><span class="s2">,</span><span class="s4">12</span><span class="s2">))</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">subplot</span><span class="s2">(</span><span class="s4">2</span><span class="s2">,</span><span class="s4">1</span><span class="s2">,</span><span class="s4">1</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">pie</span><span class="s2">(</span>
    <span class="s0">platformC</span><span class="s2">,</span>
    <span class="s0">labels</span><span class="s2">=</span><span class="s0">platformC</span><span class="s2">.</span><span class="s0">index</span><span class="s2">,</span>
    <span class="s0">autopct</span><span class="s2">=</span><span class="s1">lambda </span><span class="s0">p</span><span class="s2">: </span><span class="s3">'{:,.0f}</span><span class="s1">\n </span><span class="s3">({:.2f}%) '</span><span class="s2">.</span><span class="s0">format</span><span class="s2">(</span><span class="s0">p </span><span class="s2">* </span><span class="s0">sum</span><span class="s2">(</span><span class="s0">genderC</span><span class="s2">)/</span><span class="s4">100</span><span class="s2">, </span><span class="s0">p</span><span class="s2">),</span>
    <span class="s0">startangle</span><span class="s2">=</span><span class="s4">90</span><span class="s2">,</span>
    <span class="s0">explode</span><span class="s2">=[</span><span class="s4">0.1</span><span class="s2">]*</span><span class="s0">len</span><span class="s2">(</span><span class="s0">platformC</span><span class="s2">),</span>
    <span class="s0">textprops</span><span class="s2">={</span><span class="s3">'fontsize'</span><span class="s2">: </span><span class="s4">15</span><span class="s2">, </span><span class="s3">'fontweight'</span><span class="s2">: </span><span class="s3">'bold'</span><span class="s2">, </span><span class="s3">'color'</span><span class="s2">: </span><span class="s3">'black'</span><span class="s2">},</span>
    <span class="s0">shadow</span><span class="s2">=</span><span class="s1">True</span>
<span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">title</span><span class="s2">(</span><span class="s3">'Rozkłd platform społecznościowych'</span><span class="s2">, </span><span class="s0">fontsize</span><span class="s2">=</span><span class="s4">15</span><span class="s2">, </span><span class="s0">fontweight</span><span class="s2">=</span><span class="s3">'bold'</span><span class="s2">)</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">subplot</span><span class="s2">(</span><span class="s4">2</span><span class="s2">,</span><span class="s4">1</span><span class="s2">,</span><span class="s4">2</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">bar</span><span class="s2">(</span><span class="s0">platformC</span><span class="s2">.</span><span class="s0">index</span><span class="s2">, </span><span class="s0">platformC</span><span class="s2">.</span><span class="s0">values</span><span class="s2">, </span><span class="s0">color</span><span class="s2">=</span><span class="s3">'red'</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">xlabel</span><span class="s2">(</span><span class="s3">'Platforma'</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">ylabel</span><span class="s2">(</span><span class="s3">'Liczba osób'</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">title</span><span class="s2">(</span><span class="s3">'Histogram platform'</span><span class="s2">, </span><span class="s0">fontsize</span><span class="s2">=</span><span class="s4">15</span><span class="s2">, </span><span class="s0">fontweight</span><span class="s2">=</span><span class="s3">'bold'</span><span class="s2">)</span>
<span class="s1">for </span><span class="s0">i</span><span class="s2">, </span><span class="s0">val </span><span class="s1">in </span><span class="s0">enumerate</span><span class="s2">(</span><span class="s0">platformC</span><span class="s2">.</span><span class="s0">values</span><span class="s2">):</span>
    <span class="s0">plt</span><span class="s2">.</span><span class="s0">text</span><span class="s2">(</span><span class="s0">i</span><span class="s2">, </span><span class="s0">val</span><span class="s2">/</span><span class="s4">2</span><span class="s2">, </span><span class="s0">str</span><span class="s2">(</span><span class="s0">val</span><span class="s2">), </span><span class="s0">ha</span><span class="s2">=</span><span class="s3">'center'</span><span class="s2">, </span><span class="s0">va</span><span class="s2">=</span><span class="s3">'center'</span><span class="s2">, </span><span class="s0">fontsize</span><span class="s2">=</span><span class="s4">12</span><span class="s2">, </span><span class="s0">fontweight</span><span class="s2">=</span><span class="s3">'bold'</span><span class="s2">)</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">tight_layout</span><span class="s2">()</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">show</span><span class="s2">()</span><hr class="ls0"><span class="s0">#%% md 
#### Deklarowany poziom szczęścia 
 <hr class="ls0">#%% 
plt</span><span class="s2">.</span><span class="s0">figure</span><span class="s2">(</span><span class="s0">figsize</span><span class="s2">=(</span><span class="s4">8</span><span class="s2">,</span><span class="s4">6</span><span class="s2">))</span>
<span class="s0">h </span><span class="s2">= </span><span class="s0">sns</span><span class="s2">.</span><span class="s0">histplot</span><span class="s2">(</span><span class="s0">x</span><span class="s2">=</span><span class="s3">'Poziom_szczęścia'</span><span class="s2">, </span><span class="s0">data</span><span class="s2">=</span><span class="s0">df</span><span class="s2">, </span><span class="s0">binwidth</span><span class="s2">=</span><span class="s4">1</span><span class="s2">, </span><span class="s0">discrete</span><span class="s2">=</span><span class="s1">True </span><span class="s2">)</span>
<span class="s0">h</span><span class="s2">.</span><span class="s0">set_xlabel</span><span class="s2">(</span><span class="s3">'Poziom szczęscia użytkowników'</span><span class="s2">)</span>
<span class="s0">h</span><span class="s2">.</span><span class="s0">set_ylabel</span><span class="s2">(</span><span class="s3">'Ilość osób'</span><span class="s2">,</span><span class="s0">rotation</span><span class="s2">=</span><span class="s4">0</span><span class="s2">, </span><span class="s0">labelpad</span><span class="s2">=</span><span class="s4">30</span><span class="s2">)</span>
<span class="s0">h</span><span class="s2">.</span><span class="s0">xaxis</span><span class="s2">.</span><span class="s0">set_major_locator</span><span class="s2">(</span><span class="s0">plt</span><span class="s2">.</span><span class="s0">MaxNLocator</span><span class="s2">(</span><span class="s0">integer</span><span class="s2">=</span><span class="s1">True</span><span class="s2">))</span>
<span class="s0">h</span><span class="s2">.</span><span class="s0">set_title</span><span class="s2">(</span><span class="s3">&quot;Deklarowany poziom szczęscia użytkowników&quot;</span><span class="s2">, </span><span class="s0">fontsize</span><span class="s2">=</span><span class="s4">15</span><span class="s2">, </span><span class="s0">fontweight</span><span class="s2">=</span><span class="s3">'bold'</span><span class="s2">)</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">tight_layout</span><span class="s2">()</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">show</span><span class="s2">()</span>
<span class="s0">df</span><span class="s2">[</span><span class="s3">'Poziom_szczęścia'</span><span class="s2">].</span><span class="s0">describe</span><span class="s2">()</span>
<hr class="ls0"><span class="s0">#%% md 
## Badanie relacji i związków między danymi <hr class="ls0">#%% md 
#### Macierz korelacji danych <hr class="ls0">#%% 
df_num </span><span class="s2">= </span><span class="s0">df</span><span class="s2">[</span><span class="s0">kolNumeryczne</span><span class="s2">]</span>
<span class="s0">corr_matrix </span><span class="s2">= </span><span class="s0">df_num</span><span class="s2">.</span><span class="s0">corr</span><span class="s2">()</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">figure</span><span class="s2">(</span><span class="s0">figsize</span><span class="s2">=(</span><span class="s4">12</span><span class="s2">,</span><span class="s4">8</span><span class="s2">))</span>
<span class="s0">sns</span><span class="s2">.</span><span class="s0">heatmap</span><span class="s2">(</span><span class="s0">corr_matrix</span><span class="s2">,</span>
            <span class="s0">annot</span><span class="s2">=</span><span class="s1">True</span><span class="s2">,</span>
            <span class="s0">fmt</span><span class="s2">=</span><span class="s3">&quot;.2f&quot;</span><span class="s2">,</span>
            <span class="s0">cmap</span><span class="s2">=</span><span class="s3">&quot;coolwarm&quot;</span><span class="s2">,</span>
            <span class="s0">square</span><span class="s2">=</span><span class="s1">True</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">xticks</span><span class="s2">(</span><span class="s0">rotation</span><span class="s2">=</span><span class="s4">75</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">title</span><span class="s2">(</span><span class="s3">&quot;Macierz korelacji zmiennych numerycznych&quot;</span><span class="s2">, </span><span class="s0">fontsize</span><span class="s2">=</span><span class="s4">15</span><span class="s2">, </span><span class="s0">fontweight</span><span class="s2">=</span><span class="s3">'bold'</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">tight_layout</span><span class="s2">()</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">show</span><span class="s2">()</span><hr class="ls0"><span class="s0">#%% md 
##### Największa dodatnia korelacja, którą można zauważyć to związek między poziomem stresu i czasem spędzonym przed ekranem. Im więcej badani spędzali czasu przed ekranem tym ich poziom stresu wzrastał. 
 
##### Największa korelacja ujemna natomiast występuje między jakością snu i czasem spędzonym przed ekranem, czyli im więcej czasu badani spędzali przed ekranami tym ich późniejsza jakość snu była subiektywnie gorsza. 
 
##### Jeśli chodzi natomiast o poziom szczęscia to możemy zauważyć, że najwyższy jego poziom wykazywały osoby z dobrą jakością snu, niskim poziomem stresu i osoby które spędzały niewiele czasu przed ekranami. Przy czym największy wpływ na poziom szczęscia zdaje się mieć poziom stresu 
 
##### Co ciekawe wiek, dni bez social mediów oraz aktywność fizyczna wykazują prawie zerową korelacje z poziomem szczęścia <hr class="ls0">#%% md 
### Użytkownicy poszczególnych serwisów społecznościowych w zróżnicowaniu na grupy wiekowe <hr class="ls0">#%% 
bins </span><span class="s2">= [</span><span class="s4">14</span><span class="s2">, </span><span class="s4">19</span><span class="s2">, </span><span class="s4">29</span><span class="s2">, </span><span class="s4">39</span><span class="s2">, </span><span class="s4">49</span><span class="s2">]</span>
<span class="s0">labels </span><span class="s2">= [</span><span class="s3">'15-19'</span><span class="s2">, </span><span class="s3">'20-29'</span><span class="s2">, </span><span class="s3">'30-39'</span><span class="s2">, </span><span class="s3">'40-49'</span><span class="s2">]</span>

<span class="s0">df_age_platform </span><span class="s2">= </span><span class="s0">pd</span><span class="s2">.</span><span class="s0">DataFrame</span><span class="s2">({</span>
    <span class="s3">'Platforma'</span><span class="s2">: </span><span class="s0">df</span><span class="s2">[</span><span class="s3">'Platformy_social_mediów'</span><span class="s2">],</span>
    <span class="s3">'Grupa_wiekowa'</span><span class="s2">: </span><span class="s0">pd</span><span class="s2">.</span><span class="s0">cut</span><span class="s2">(</span><span class="s0">df</span><span class="s2">[</span><span class="s3">'Wiek'</span><span class="s2">], </span><span class="s0">bins</span><span class="s2">=</span><span class="s0">bins</span><span class="s2">, </span><span class="s0">labels</span><span class="s2">=</span><span class="s0">labels</span><span class="s2">, </span><span class="s0">right</span><span class="s2">=</span><span class="s1">True</span><span class="s2">)</span>
<span class="s2">})</span>

<span class="s0">platformy </span><span class="s2">= </span><span class="s0">df_age_platform</span><span class="s2">[</span><span class="s3">'Platforma'</span><span class="s2">].</span><span class="s0">unique</span><span class="s2">()</span>


<span class="s0">fig</span><span class="s2">, </span><span class="s0">axes </span><span class="s2">= </span><span class="s0">plt</span><span class="s2">.</span><span class="s0">subplots</span><span class="s2">(</span><span class="s0">nrows</span><span class="s2">=</span><span class="s4">3</span><span class="s2">, </span><span class="s0">ncols</span><span class="s2">=</span><span class="s4">2</span><span class="s2">, </span><span class="s0">figsize</span><span class="s2">=(</span><span class="s4">18</span><span class="s2">,</span><span class="s4">24</span><span class="s2">))</span>
<span class="s0">fig</span><span class="s2">.</span><span class="s0">suptitle</span><span class="s2">(</span><span class="s3">&quot;Użytkownicy poszczególnych serwisów społecznościowych w zróżnicowaniu na grupy wiekowe&quot;</span><span class="s2">, </span><span class="s0">fontsize</span><span class="s2">=</span><span class="s4">25</span><span class="s2">, </span><span class="s0">fontweight</span><span class="s2">=</span><span class="s3">'bold'</span><span class="s2">, </span><span class="s0">y</span><span class="s2">=</span><span class="s4">1.02</span><span class="s2">)</span>
<span class="s0">axes </span><span class="s2">= </span><span class="s0">axes</span><span class="s2">.</span><span class="s0">flatten</span><span class="s2">()</span>

<span class="s1">for </span><span class="s0">i</span><span class="s2">, </span><span class="s0">platforma </span><span class="s1">in </span><span class="s0">enumerate</span><span class="s2">(</span><span class="s0">platformy</span><span class="s2">):</span>
    <span class="s0">ax </span><span class="s2">= </span><span class="s0">axes</span><span class="s2">[</span><span class="s0">i</span><span class="s2">]</span>
    <span class="s0">df_plat </span><span class="s2">= </span><span class="s0">df_age_platform</span><span class="s2">[</span><span class="s0">df_age_platform</span><span class="s2">[</span><span class="s3">'Platforma'</span><span class="s2">] == </span><span class="s0">platforma</span><span class="s2">]</span>
    <span class="s0">counts </span><span class="s2">= </span><span class="s0">df_plat</span><span class="s2">[</span><span class="s3">'Grupa_wiekowa'</span><span class="s2">].</span><span class="s0">value_counts</span><span class="s2">().</span><span class="s0">sort_index</span><span class="s2">()</span>

    <span class="s0">sns</span><span class="s2">.</span><span class="s0">barplot</span><span class="s2">(</span><span class="s0">x</span><span class="s2">=</span><span class="s0">counts</span><span class="s2">.</span><span class="s0">index</span><span class="s2">, </span><span class="s0">y</span><span class="s2">=</span><span class="s0">counts</span><span class="s2">.</span><span class="s0">values</span><span class="s2">, </span><span class="s0">ax</span><span class="s2">=</span><span class="s0">ax</span><span class="s2">)</span>
    <span class="s0">ax</span><span class="s2">.</span><span class="s0">set_title</span><span class="s2">(</span><span class="s0">platforma</span><span class="s2">, </span><span class="s0">fontsize</span><span class="s2">=</span><span class="s4">14</span><span class="s2">, </span><span class="s0">fontweight</span><span class="s2">=</span><span class="s3">'bold'</span><span class="s2">)</span>
    <span class="s0">ax</span><span class="s2">.</span><span class="s0">set_xlabel</span><span class="s2">(</span><span class="s3">'Grupa wiekowa'</span><span class="s2">)</span>
    <span class="s0">ax</span><span class="s2">.</span><span class="s0">set_ylabel</span><span class="s2">(</span><span class="s3">'Liczba osób'</span><span class="s2">)</span>

    <span class="s5"># liczby na słupkach</span>
    <span class="s1">for </span><span class="s0">j</span><span class="s2">, </span><span class="s0">val </span><span class="s1">in </span><span class="s0">enumerate</span><span class="s2">(</span><span class="s0">counts</span><span class="s2">.</span><span class="s0">values</span><span class="s2">):</span>
        <span class="s0">ax</span><span class="s2">.</span><span class="s0">text</span><span class="s2">(</span><span class="s0">j</span><span class="s2">, </span><span class="s0">val </span><span class="s2">+ </span><span class="s4">0.5</span><span class="s2">, </span><span class="s0">str</span><span class="s2">(</span><span class="s0">val</span><span class="s2">), </span><span class="s0">ha</span><span class="s2">=</span><span class="s3">'center'</span><span class="s2">, </span><span class="s0">va</span><span class="s2">=</span><span class="s3">'bottom'</span><span class="s2">, </span><span class="s0">fontsize</span><span class="s2">=</span><span class="s4">12</span><span class="s2">)</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">tight_layout</span><span class="s2">()</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">show</span><span class="s2">()</span><hr class="ls0"><span class="s0">#%% md 
### Zróżnicowanie użytkowników platform ze względu na płeć <hr class="ls0">#%% 
gender_platform </span><span class="s2">= </span><span class="s0">df</span><span class="s2">.</span><span class="s0">groupby</span><span class="s2">([</span><span class="s3">'Platformy_social_mediów'</span><span class="s2">, </span><span class="s3">'Płeć'</span><span class="s2">]).</span><span class="s0">size</span><span class="s2">()</span>
<span class="s0">platforms </span><span class="s2">= </span><span class="s0">df</span><span class="s2">[</span><span class="s3">'Platformy_social_mediów'</span><span class="s2">].</span><span class="s0">unique</span><span class="s2">()</span>

<span class="s0">fig</span><span class="s2">, </span><span class="s0">axes </span><span class="s2">= </span><span class="s0">plt</span><span class="s2">.</span><span class="s0">subplots</span><span class="s2">(</span><span class="s4">3</span><span class="s2">, </span><span class="s4">2</span><span class="s2">, </span><span class="s0">figsize</span><span class="s2">=(</span><span class="s4">12</span><span class="s2">, </span><span class="s4">16</span><span class="s2">))</span>
<span class="s0">axes </span><span class="s2">= </span><span class="s0">axes</span><span class="s2">.</span><span class="s0">flatten</span><span class="s2">()</span>

<span class="s1">for </span><span class="s0">i</span><span class="s2">, </span><span class="s0">platform </span><span class="s1">in </span><span class="s0">enumerate</span><span class="s2">(</span><span class="s0">platforms</span><span class="s2">):</span>
    <span class="s0">ax </span><span class="s2">= </span><span class="s0">axes</span><span class="s2">[</span><span class="s0">i</span><span class="s2">]</span>
    <span class="s0">counts </span><span class="s2">= </span><span class="s0">gender_platform</span><span class="s2">[</span><span class="s0">platform</span><span class="s2">]</span>
    <span class="s0">labels </span><span class="s2">= </span><span class="s0">counts</span><span class="s2">.</span><span class="s0">index</span>
    <span class="s0">values </span><span class="s2">= </span><span class="s0">counts</span><span class="s2">.</span><span class="s0">values</span>

    <span class="s0">ax</span><span class="s2">.</span><span class="s0">pie</span><span class="s2">(</span>
        <span class="s0">values</span><span class="s2">,</span>
        <span class="s0">labels</span><span class="s2">=</span><span class="s0">labels</span><span class="s2">,</span>
        <span class="s0">autopct</span><span class="s2">=</span><span class="s1">lambda </span><span class="s0">p</span><span class="s2">: </span><span class="s3">'{:,.0f}</span><span class="s1">\n </span><span class="s3">({:.2f}%) '</span><span class="s2">.</span><span class="s0">format</span><span class="s2">(</span><span class="s0">p </span><span class="s2">* </span><span class="s0">sum</span><span class="s2">(</span><span class="s0">values</span><span class="s2">)/</span><span class="s4">100</span><span class="s2">, </span><span class="s0">p</span><span class="s2">),</span>
        <span class="s0">textprops</span><span class="s2">={</span><span class="s3">'fontsize'</span><span class="s2">: </span><span class="s4">15</span><span class="s2">, </span><span class="s3">'fontweight'</span><span class="s2">: </span><span class="s3">'bold'</span><span class="s2">, </span><span class="s3">'color'</span><span class="s2">: </span><span class="s3">'black'</span><span class="s2">},</span>
        <span class="s0">startangle</span><span class="s2">=</span><span class="s4">90</span>
    <span class="s2">)</span>
    <span class="s0">ax</span><span class="s2">.</span><span class="s0">set_title</span><span class="s2">(</span><span class="s0">platform</span><span class="s2">, </span><span class="s0">fontsize</span><span class="s2">=</span><span class="s4">18</span><span class="s2">, </span><span class="s0">fontweight</span><span class="s2">=</span><span class="s3">'bold'</span><span class="s2">)</span>


<span class="s0">plt</span><span class="s2">.</span><span class="s0">tight_layout</span><span class="s2">()</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">show</span><span class="s2">()</span>
<hr class="ls0"><span class="s0">#%% md 
# Średni poziom stresu w różnych grupach wiekowych <hr class="ls0">#%% 
ages </span><span class="s2">= </span><span class="s0">df</span><span class="s2">[</span><span class="s3">'Wiek'</span><span class="s2">]</span>

<span class="s0">bins </span><span class="s2">= [</span><span class="s4">14</span><span class="s2">, </span><span class="s4">19</span><span class="s2">, </span><span class="s4">29</span><span class="s2">, </span><span class="s4">39</span><span class="s2">, </span><span class="s4">49</span><span class="s2">]</span>
<span class="s0">labels </span><span class="s2">= [</span><span class="s3">'15-19'</span><span class="s2">,</span><span class="s3">'20-29'</span><span class="s2">,</span><span class="s3">'30-39'</span><span class="s2">,</span><span class="s3">'40-49'</span><span class="s2">]</span>
<span class="s0">df</span><span class="s2">[</span><span class="s3">'_grupa_wiekowa'</span><span class="s2">] = </span><span class="s0">pd</span><span class="s2">.</span><span class="s0">cut</span><span class="s2">(</span><span class="s0">ages</span><span class="s2">, </span><span class="s0">bins</span><span class="s2">=</span><span class="s0">bins</span><span class="s2">, </span><span class="s0">labels</span><span class="s2">=</span><span class="s0">labels</span><span class="s2">)</span>

<span class="s0">agg </span><span class="s2">= </span><span class="s0">df</span><span class="s2">.</span><span class="s0">groupby</span><span class="s2">(</span><span class="s3">'_grupa_wiekowa'</span><span class="s2">)[</span><span class="s3">'Poziom_stresu'</span><span class="s2">].</span><span class="s0">mean</span><span class="s2">()</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">figure</span><span class="s2">(</span><span class="s0">figsize</span><span class="s2">=(</span><span class="s4">8</span><span class="s2">,</span><span class="s4">5</span><span class="s2">))</span>
<span class="s0">agg</span><span class="s2">.</span><span class="s0">plot</span><span class="s2">(</span><span class="s0">kind</span><span class="s2">=</span><span class="s3">'bar'</span><span class="s2">, </span><span class="s0">color</span><span class="s2">=</span><span class="s3">'tomato'</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">title</span><span class="s2">(</span><span class="s3">&quot;Średni poziom stresu w grupach wiekowych&quot;</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">xlabel</span><span class="s2">(</span><span class="s3">&quot;Grupa wiekowa&quot;</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">ylabel</span><span class="s2">(</span><span class="s3">&quot;Średni poziom stresu&quot;</span><span class="s2">)</span>
<span class="s1">for </span><span class="s0">i</span><span class="s2">, </span><span class="s0">val </span><span class="s1">in </span><span class="s0">enumerate</span><span class="s2">(</span><span class="s0">agg</span><span class="s2">.</span><span class="s0">values</span><span class="s2">):</span>
    <span class="s0">plt</span><span class="s2">.</span><span class="s0">text</span><span class="s2">(</span><span class="s0">i</span><span class="s2">, </span><span class="s0">val</span><span class="s2">/</span><span class="s4">2</span><span class="s2">, </span><span class="s0">str</span><span class="s2">(</span><span class="s0">round</span><span class="s2">(</span><span class="s0">val</span><span class="s2">,</span><span class="s4">2</span><span class="s2">)), </span><span class="s0">ha</span><span class="s2">=</span><span class="s3">'center'</span><span class="s2">, </span><span class="s0">va</span><span class="s2">=</span><span class="s3">'center'</span><span class="s2">, </span><span class="s0">fontsize</span><span class="s2">=</span><span class="s4">12</span><span class="s2">, </span><span class="s0">fontweight</span><span class="s2">=</span><span class="s3">'bold'</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">tight_layout</span><span class="s2">()</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">show</span><span class="s2">()</span>
<hr class="ls0"><span class="s0">#%% md 
#### Można zauważyć że stres rośnie z wiekiem do 40 roku życia <hr class="ls0">#%% md 
# Średni poziom szczęścia w zależności od płci <hr class="ls0">#%% 
agg </span><span class="s2">= </span><span class="s0">df</span><span class="s2">.</span><span class="s0">groupby</span><span class="s2">(</span><span class="s3">'Płeć'</span><span class="s2">)[</span><span class="s3">'Poziom_szczęścia'</span><span class="s2">].</span><span class="s0">mean</span><span class="s2">()</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">figure</span><span class="s2">(</span><span class="s0">figsize</span><span class="s2">=(</span><span class="s4">6</span><span class="s2">,</span><span class="s4">5</span><span class="s2">))</span>
<span class="s0">agg</span><span class="s2">.</span><span class="s0">plot</span><span class="s2">(</span><span class="s0">kind</span><span class="s2">=</span><span class="s3">'bar'</span><span class="s2">, </span><span class="s0">color</span><span class="s2">=</span><span class="s3">'skyblue'</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">title</span><span class="s2">(</span><span class="s3">&quot;Średni poziom szczęścia wg płci&quot;</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">xlabel</span><span class="s2">(</span><span class="s3">&quot;Płeć&quot;</span><span class="s2">,</span><span class="s0">rotation</span><span class="s2">=</span><span class="s4">0</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">xticks</span><span class="s2">(</span><span class="s0">rotation</span><span class="s2">=</span><span class="s4">0</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">ylabel</span><span class="s2">(</span><span class="s3">&quot;Średni poziom szczęścia&quot;</span><span class="s2">)</span>
<span class="s1">for </span><span class="s0">i</span><span class="s2">, </span><span class="s0">val </span><span class="s1">in </span><span class="s0">enumerate</span><span class="s2">(</span><span class="s0">agg</span><span class="s2">.</span><span class="s0">values</span><span class="s2">):</span>
    <span class="s0">plt</span><span class="s2">.</span><span class="s0">text</span><span class="s2">(</span><span class="s0">i</span><span class="s2">, </span><span class="s0">val</span><span class="s2">/</span><span class="s4">2</span><span class="s2">, </span><span class="s0">str</span><span class="s2">(</span><span class="s0">round</span><span class="s2">(</span><span class="s0">val</span><span class="s2">,</span><span class="s4">2</span><span class="s2">)), </span><span class="s0">ha</span><span class="s2">=</span><span class="s3">'center'</span><span class="s2">, </span><span class="s0">va</span><span class="s2">=</span><span class="s3">'center'</span><span class="s2">, </span><span class="s0">fontsize</span><span class="s2">=</span><span class="s4">12</span><span class="s2">, </span><span class="s0">fontweight</span><span class="s2">=</span><span class="s3">'bold'</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">tight_layout</span><span class="s2">()</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">show</span><span class="s2">()</span>
<hr class="ls0"><span class="s0">#%% md 
#### Poziom szczęscia nieszczególnie zależy od płci <hr class="ls0">#%% md 
# Różnice w stresie między użytkownikami intensywnymi a umiarkowanymi (na podstawie czasu przed ekranem) <hr class="ls0">#%% 
</span><span class="s5"># Użytkownicy intensywni: Czas_przed_ekranem_dziennie &gt; mediana, umiarkowani &lt;= mediana</span>
<span class="s0">mediana </span><span class="s2">= </span><span class="s0">df</span><span class="s2">[</span><span class="s3">'Czas_przed_ekranem_dziennie'</span><span class="s2">].</span><span class="s0">median</span><span class="s2">()</span>
<span class="s0">df</span><span class="s2">[</span><span class="s3">'Grupa_użytkownika'</span><span class="s2">] = </span><span class="s0">df</span><span class="s2">[</span><span class="s3">'Czas_przed_ekranem_dziennie'</span><span class="s2">].</span><span class="s0">apply</span><span class="s2">(</span><span class="s1">lambda </span><span class="s0">x</span><span class="s2">: </span><span class="s3">'Intensywni' </span><span class="s1">if </span><span class="s0">x </span><span class="s2">&gt; </span><span class="s0">mediana </span><span class="s1">else </span><span class="s3">'Umiarkowani'</span><span class="s2">)</span>

<span class="s0">grupy </span><span class="s2">= </span><span class="s0">df</span><span class="s2">.</span><span class="s0">groupby</span><span class="s2">(</span><span class="s3">'Grupa_użytkownika'</span><span class="s2">)[</span><span class="s3">'Poziom_stresu'</span><span class="s2">]</span>

<span class="s0">data </span><span class="s2">= [</span><span class="s0">grupy</span><span class="s2">.</span><span class="s0">get_group</span><span class="s2">(</span><span class="s0">g</span><span class="s2">).</span><span class="s0">dropna</span><span class="s2">() </span><span class="s1">for </span><span class="s0">g </span><span class="s1">in </span><span class="s2">[</span><span class="s3">'Umiarkowani'</span><span class="s2">, </span><span class="s3">'Intensywni'</span><span class="s2">]]</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">figure</span><span class="s2">(</span><span class="s0">figsize</span><span class="s2">=(</span><span class="s4">7</span><span class="s2">,</span><span class="s4">5</span><span class="s2">))</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">boxplot</span><span class="s2">(</span><span class="s0">data</span><span class="s2">, </span><span class="s0">labels</span><span class="s2">=[</span><span class="s3">'Umiarkowani'</span><span class="s2">, </span><span class="s3">'Intensywni'</span><span class="s2">])</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">title</span><span class="s2">(</span><span class="s3">'Poziom stresu: Użytkownicy umiarkowani vs intensywni'</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">ylabel</span><span class="s2">(</span><span class="s3">'Poziom stresu'</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">tight_layout</span><span class="s2">()</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">show</span><span class="s2">()</span>

<span class="s5"># Test t dla różnicy średnich</span>
<span class="s0">t_stat</span><span class="s2">, </span><span class="s0">p_val </span><span class="s2">= </span><span class="s0">stats</span><span class="s2">.</span><span class="s0">ttest_ind</span><span class="s2">(</span><span class="s0">data</span><span class="s2">[</span><span class="s4">0</span><span class="s2">], </span><span class="s0">data</span><span class="s2">[</span><span class="s4">1</span><span class="s2">], </span><span class="s0">equal_var</span><span class="s2">=</span><span class="s1">False</span><span class="s2">)</span>
<span class="s0">print</span><span class="s2">(</span><span class="s3">f&quot;Test t: t = </span><span class="s1">{</span><span class="s0">t_stat</span><span class="s1">:</span><span class="s3">.3f</span><span class="s1">}</span><span class="s3">, p = </span><span class="s1">{</span><span class="s0">p_val</span><span class="s1">:</span><span class="s3">.4f</span><span class="s1">}</span><span class="s3">&quot;</span><span class="s2">)</span>
<hr class="ls0"><span class="s0">#%% md 
#### Użytkownicy intensywni wykazują wyższy poziom stresu <hr class="ls0">#%% md 
# Jakość snu na różnych poziomach aktywności w social media (na podstawie czasu przed ekranem) <hr class="ls0">#%% 
</span><span class="s5"># Grupujemy na niską, średnią i wysoką aktywność wg czasu przed ekranem</span>
<span class="s0">med </span><span class="s2">= </span><span class="s0">df</span><span class="s2">[</span><span class="s3">'Czas_przed_ekranem_dziennie'</span><span class="s2">].</span><span class="s0">median</span><span class="s2">()</span>
<span class="s0">low_thresh </span><span class="s2">= </span><span class="s0">med </span><span class="s2">/ </span><span class="s4">2</span>

<span class="s1">def </span><span class="s0">grupa_aktywnosci</span><span class="s2">(</span><span class="s0">x</span><span class="s2">):</span>
    <span class="s1">if </span><span class="s0">x </span><span class="s2">&lt;= </span><span class="s0">low_thresh</span><span class="s2">:</span>
        <span class="s1">return </span><span class="s3">'Niska'</span>
    <span class="s1">elif </span><span class="s0">x </span><span class="s2">&lt;= </span><span class="s0">med</span><span class="s2">:</span>
        <span class="s1">return </span><span class="s3">'Średnia'</span>
    <span class="s1">else</span><span class="s2">:</span>
        <span class="s1">return </span><span class="s3">'Wysoka'</span>

<span class="s0">df</span><span class="s2">[</span><span class="s3">'Aktywnosc_SM'</span><span class="s2">] = </span><span class="s0">df</span><span class="s2">[</span><span class="s3">'Czas_przed_ekranem_dziennie'</span><span class="s2">].</span><span class="s0">apply</span><span class="s2">(</span><span class="s0">grupa_aktywnosci</span><span class="s2">)</span>

<span class="s0">groups </span><span class="s2">= </span><span class="s0">df</span><span class="s2">.</span><span class="s0">groupby</span><span class="s2">(</span><span class="s3">'Aktywnosc_SM'</span><span class="s2">)[</span><span class="s3">'Jakość_snu'</span><span class="s2">]</span>

<span class="s0">data </span><span class="s2">= [</span><span class="s0">groups</span><span class="s2">.</span><span class="s0">get_group</span><span class="s2">(</span><span class="s0">g</span><span class="s2">).</span><span class="s0">dropna</span><span class="s2">() </span><span class="s1">for </span><span class="s0">g </span><span class="s1">in </span><span class="s2">[</span><span class="s3">'Niska'</span><span class="s2">, </span><span class="s3">'Średnia'</span><span class="s2">, </span><span class="s3">'Wysoka'</span><span class="s2">]]</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">figure</span><span class="s2">(</span><span class="s0">figsize</span><span class="s2">=(</span><span class="s4">7</span><span class="s2">,</span><span class="s4">5</span><span class="s2">))</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">boxplot</span><span class="s2">(</span><span class="s0">data</span><span class="s2">, </span><span class="s0">labels</span><span class="s2">=[</span><span class="s3">'Niska'</span><span class="s2">, </span><span class="s3">'Średnia'</span><span class="s2">, </span><span class="s3">'Wysoka'</span><span class="s2">])</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">title</span><span class="s2">(</span><span class="s3">'Jakość snu w zależności od poziomu aktywności w social media'</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">ylabel</span><span class="s2">(</span><span class="s3">'Jakość snu'</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">tight_layout</span><span class="s2">()</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">show</span><span class="s2">()</span>
<hr class="ls0"><span class="s0">#%% md 
#### Można zaobserwować jak jakość snu spada gdy więcej czasu spędza się w social mediach <hr class="ls0">#%% 
groups </span><span class="s2">= </span><span class="s0">df</span><span class="s2">.</span><span class="s0">groupby</span><span class="s2">(</span><span class="s3">'Aktywnosc_SM'</span><span class="s2">)[</span><span class="s3">'Poziom_szczęścia'</span><span class="s2">]</span>

<span class="s0">data </span><span class="s2">= [</span><span class="s0">groups</span><span class="s2">.</span><span class="s0">get_group</span><span class="s2">(</span><span class="s0">g</span><span class="s2">).</span><span class="s0">dropna</span><span class="s2">() </span><span class="s1">for </span><span class="s0">g </span><span class="s1">in </span><span class="s2">[</span><span class="s3">'Niska'</span><span class="s2">, </span><span class="s3">'Średnia'</span><span class="s2">, </span><span class="s3">'Wysoka'</span><span class="s2">]]</span>

<span class="s0">plt</span><span class="s2">.</span><span class="s0">figure</span><span class="s2">(</span><span class="s0">figsize</span><span class="s2">=(</span><span class="s4">7</span><span class="s2">,</span><span class="s4">5</span><span class="s2">))</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">boxplot</span><span class="s2">(</span><span class="s0">data</span><span class="s2">, </span><span class="s0">labels</span><span class="s2">=[</span><span class="s3">'Niska'</span><span class="s2">, </span><span class="s3">'Średnia'</span><span class="s2">, </span><span class="s3">'Wysoka'</span><span class="s2">])</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">title</span><span class="s2">(</span><span class="s3">'Poziom szczęscia w zależności od poziomu aktywności w social media'</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">ylabel</span><span class="s2">(</span><span class="s3">'Poziom szczęścia'</span><span class="s2">)</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">tight_layout</span><span class="s2">()</span>
<span class="s0">plt</span><span class="s2">.</span><span class="s0">show</span><span class="s2">()</span><hr class="ls0"><span class="s0">#%% md 
#### Użytkownicy, którzy więcej czasu spędzają w social mediach wykazują niższy poziom szczęscia</span></pre>
</body>
</html>